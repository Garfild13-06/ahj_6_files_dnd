{"version":3,"file":"main.js","mappings":"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","sources":["webpack://ajs/./src/js/app.js","webpack://ajs/webpack/bootstrap","webpack://ajs/webpack/runtime/compat get default export","webpack://ajs/webpack/runtime/define property getters","webpack://ajs/webpack/runtime/hasOwnProperty shorthand"],"sourcesContent":["/* eslint-disable no-use-before-define */\nlet draggedCard = null;\nlet placeholder = null;\nlet offsetX = 0;\nlet offsetY = 0;\nlet isDragging = false;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  loadStateFromStorage();\n\n  const board = document.querySelector('.board');\n\n  // Добавляем события для кнопок и перетаскивания\n  board.addEventListener('click', onClick);\n  board.addEventListener('mousedown', onMouseDown);\n  document.addEventListener('mousemove', onMouseMove);\n  document.addEventListener('mouseup', onMouseUp);\n});\n\nfunction onClick(event) {\n  if (event.target.classList.contains('add-card')) {\n    const listId = event.target.closest('.list').id;\n    showCardInput(listId);\n  } else if (event.target.classList.contains('add-btn')) {\n    const listId = event.target.closest('.list').id;\n    addCard(listId);\n  } else if (event.target.classList.contains('cancel-btn')) {\n    cancelCardInput(event.target.closest('.new-card-form')); // Передаём форму\n  } else if (event.target.classList.contains('card')) {\n    const rect = event.target.getBoundingClientRect();\n    const mouseX = event.clientX;\n    const mouseY = event.clientY;\n\n    // Проверяем, попал ли клик в область крестика (20px от правого верхнего угла)\n    // eslint-disable-next-line max-len\n    if (mouseX > rect.right - 20 && mouseX < rect.right && mouseY > rect.top && mouseY < rect.top + 20) {\n      event.target.remove(); // Удаляем карточку\n      saveStateToStorage();\n    }\n  }\n}\n\nfunction cancelCardInput(form) {\n  if (form) {\n    form.remove(); // Удаляем форму из DOM\n  }\n}\n\ndocument.addEventListener('click', (event) => {\n  if (event.target.classList.contains('card')) {\n    const rect = event.target.getBoundingClientRect();\n    const mouseX = event.clientX;\n    const mouseY = event.clientY;\n\n    // eslint-disable-next-line max-len\n    if (mouseX > rect.right - 20 && mouseX < rect.right && mouseY > rect.top && mouseY < rect.top + 20) {\n      event.target.remove();\n      saveStateToStorage();\n    }\n  }\n});\n\nfunction showCardInput(listId) {\n  const list = document.getElementById(listId);\n  const cardsContainer = list.querySelector('.cards');\n\n  if (list.querySelector('.new-card-form')) return;\n\n  const form = document.createElement('div');\n  form.className = 'new-card-form';\n  form.innerHTML = `\n    <textarea placeholder=\"Enter a title for this card...\" class=\"new-card-input\"></textarea>\n    <div class=\"new-card-actions\">\n        <button class=\"add-btn\">Add Card</button>\n        <button class=\"cancel-btn\">X</button>\n    </div>`;\n  cardsContainer.appendChild(form);\n}\n\nfunction addCard(listId) {\n  const list = document.getElementById(listId);\n  const input = list.querySelector('.new-card-input');\n  const cardsContainer = list.querySelector('.cards');\n\n  if (input && input.value.trim()) {\n    const card = document.createElement('div');\n    card.className = 'card';\n    card.textContent = input.value.trim();\n\n    cardsContainer.appendChild(card);\n    input.closest('.new-card-form').remove();\n    saveStateToStorage();\n  }\n}\n\nfunction onMouseDown(event) {\n  const card = event.target.closest('.card');\n\n  // Если карточка не найдена или клик был по крестику\n  if (!card || isClickOnDeleteZone(event, card)) {\n    return; // Прерываем выполнение (не начинаем перетаскивание)\n  }\n\n  event.preventDefault();\n\n  isDragging = false;\n  draggedCard = card;\n\n  draggedCard.classList.add('dragging');\n\n  const rect = draggedCard.getBoundingClientRect();\n  draggedCard.style.width = `${rect.width}px`;\n  draggedCard.style.height = `${rect.height}px`;\n\n  offsetX = event.clientX - rect.left;\n  offsetY = event.clientY - rect.top;\n\n  placeholder = document.createElement('div');\n  placeholder.className = 'placeholder';\n  placeholder.style.height = `${rect.height}px`;\n\n  draggedCard.after(placeholder);\n  document.body.appendChild(draggedCard);\n\n  draggedCard.style.position = 'absolute';\n  draggedCard.style.zIndex = '1000';\n\n  moveCard(event.pageX, event.pageY);\n\n  const dragTimeout = setTimeout(() => {\n    isDragging = true;\n  }, 200);\n\n  document.addEventListener('mouseup', () => {\n    clearTimeout(dragTimeout);\n    if (!isDragging) resetCardState();\n  }, { once: true },);\n}\n\n// Функция для проверки клика по зоне крестика\nfunction isClickOnDeleteZone(event, card) {\n  const rect = card.getBoundingClientRect();\n  const mouseX = event.clientX;\n  const mouseY = event.clientY;\n\n  // Задаём область крестика: 20x20 пикселей в правом верхнем углу\n  // eslint-disable-next-line max-len\n  return (mouseX > rect.right - 25 && mouseX < rect.right && mouseY > rect.top && mouseY < rect.top + 25);\n}\n\nfunction deleteCard(deleteButton) {\n  deleteButton.closest('.card').remove();\n  saveStateToStorage();\n}\n\nfunction onMouseMove(event) {\n  if (!draggedCard || !isDragging) return;\n\n  moveCard(event.pageX, event.pageY);\n\n  const elements = document.elementsFromPoint(event.clientX, event.clientY);\n  const closestCard = elements.find((el) => el.classList.contains('card') && el !== draggedCard);\n  const closestList = elements.find((el) => el.classList.contains('cards'));\n\n  if (closestCard) {\n    const rect = closestCard.getBoundingClientRect();\n    if (event.clientY < rect.top + rect.height / 2) {\n      closestCard.before(placeholder);\n    } else {\n      closestCard.after(placeholder);\n    }\n  } else if (closestList && !closestList.contains(placeholder)) {\n    closestList.appendChild(placeholder);\n  }\n}\n\nfunction onMouseUp() {\n  if (!draggedCard) return;\n\n  placeholder.replaceWith(draggedCard);\n\n  // Сбрасываем стили карточки\n  resetCardState();\n  saveStateToStorage();\n}\n\nfunction moveCard(pageX, pageY) {\n  if (!draggedCard) return;\n  draggedCard.style.left = `${pageX - offsetX}px`;\n  draggedCard.style.top = `${pageY - offsetY}px`;\n}\n\n/* LocalStorage Functions */\nfunction saveStateToStorage() {\n  const state = {};\n  document.querySelectorAll('.list').forEach((list) => {\n    const cards = Array.from(list.querySelectorAll('.card')).map((card) => card.textContent.trim());\n    state[list.id] = cards;\n  });\n  localStorage.setItem('boardState', JSON.stringify(state));\n}\n\nfunction loadStateFromStorage() {\n  const state = JSON.parse(localStorage.getItem('boardState')) || {};\n  Object.entries(state).forEach(([listId, cards]) => {\n    const cardsContainer = document.getElementById(listId).querySelector('.cards');\n    cardsContainer.innerHTML = ''; // Очищаем старое содержимое\n    cards.forEach((text) => {\n      const card = document.createElement('div');\n      card.className = 'card';\n      card.textContent = text;\n      cardsContainer.appendChild(card);\n    });\n  });\n}\n\nfunction resetCardState() {\n  if (!draggedCard) return;\n\n  // Сбрасываем все стили и классы\n  draggedCard.classList.remove('dragged', 'dragging');\n  draggedCard.style.position = '';\n  draggedCard.style.zIndex = '';\n  draggedCard.style.width = '';\n  draggedCard.style.height = '';\n  draggedCard.style.left = '';\n  draggedCard.style.top = '';\n\n  draggedCard = null;\n  placeholder = null;\n  isDragging = false;\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))"],"names":["draggedCard","placeholder","offsetX","offsetY","isDragging","onClick","event","target","classList","contains","listId","list","document","getElementById","cardsContainer","querySelector","form","createElement","className","innerHTML","appendChild","showCardInput","closest","id","input","value","trim","card","textContent","remove","saveStateToStorage","addCard","rect","getBoundingClientRect","mouseX","clientX","mouseY","clientY","right","top","onMouseDown","isClickOnDeleteZone","preventDefault","add","style","width","height","left","after","body","position","zIndex","moveCard","pageX","pageY","dragTimeout","setTimeout","addEventListener","clearTimeout","resetCardState","once","onMouseMove","elements","elementsFromPoint","closestCard","find","el","closestList","before","onMouseUp","replaceWith","state","querySelectorAll","forEach","cards","Array","from","map","localStorage","setItem","JSON","stringify","parse","getItem","Object","entries","_ref","text","loadStateFromStorage","board","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call"],"sourceRoot":""}